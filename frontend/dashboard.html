<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CreditoSys - Dashboard</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="loading" id="loadingScreen">
        <div class="spinner"></div>
    </div>

    <div class="notification" id="notification">
        <span id="notificationText"></span>
    </div>

    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-university"></i>
                <div>
                    <h1>CreditoSys</h1>
                    <small>Sistema de Gestión de Créditos</small>
                </div>
            </div>
            <div class="user-info">
                <div>
                    <strong id="userName">Cargando...</strong>
                    <br>
                    <small id="userRole">Usuario</small>
                </div>
                <div class="user-avatar" id="userAvatar" onclick="irAPerfil()" style="cursor: pointer;" title="Ver Perfil">U</div>
                <a href="nueva_solicitud.html" class="btn btn-primary client-only">
                    <i class="fas fa-plus"></i> Nueva Solicitud
                </a>
                <button class="btn btn-secondary" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Salir
                </button>
            </div>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="irADashboard()">
                <i class="fas fa-chart-dashboard"></i> Dashboard
            </button>
            <button class="nav-tab client-only" onclick="irASolicitudes()">
                <i class="fas fa-file-alt"></i> Solicitudes
            </button>
            <button class="nav-tab client-only" onclick="irANuevaSolicitud()">
                <i class="fas fa-plus-circle"></i> Nueva Solicitud
            </button>
            <button class="nav-tab" onclick="irADocumentos()">
                <i class="fas fa-folder-open"></i> Documentos
            </button>
            <button class="nav-tab d-none evaluator-admin-only" onclick="irAEvaluacion()" id="evaluacionTab">
                <i class="fas fa-search"></i> Evaluación
            </button>
            <button class="nav-tab d-none admin-only" onclick="irAAdmin()" id="adminTab">
                <i class="fas fa-cogs"></i> Administración
            </button>
            <button class="nav-tab d-none evaluator-admin-only" onclick="showSection('reportes')" id="reportesTab">
                <i class="fas fa-chart-bar"></i> Reportes
            </button>
            <button class="nav-tab" onclick="window.location.href='perfil.html'">
                <i class="fas fa-user"></i> Perfil
            </button>
        </nav>

        <section id="dashboard" class="content-section active">
            <div class="card mb-3">
                <div class="card-body text-center" style="background: var(--primary-gradient); color: white; border-radius: var(--border-radius-lg);">
                    <h2>¡Bienvenido al Sistema!</h2>
                    <p>Has iniciado sesión exitosamente en CreditoSys</p>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">
                    <h3><i class="fas fa-bolt"></i> Acciones Rápidas</h3>
                </div>
                <div class="card-body">
                    <div class="row" id="quickActionsRow">
                        <div class="col-4 client-only">
                            <a href="nueva_solicitud.html" class="btn btn-primary btn-block btn-lg">
                                <i class="fas fa-plus-circle"></i>
                                <br>
                                Nueva Solicitud
                            </a>
                        </div>
                        <div class="col-4 client-only">
                            <a href="solicitudes.html" class="btn btn-secondary btn-block btn-lg">
                                <i class="fas fa-list"></i>
                                <br>
                                Ver Solicitudes
                            </a>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-outline btn-block btn-lg" onclick="irADocumentos()">
                                <i class="fas fa-upload"></i>
                                <br>
                                Subir Documentos
                            </button>
                        </div>
                        
                        <div class="col-4 d-none evaluator-admin-only" id="actionEvaluacion">
                            <a href="solicitudes.html" class="btn btn-success btn-block btn-lg">
                                <i class="fas fa-search"></i>
                                <br>
                                Panel Evaluación
                            </a>
                        </div>
                        
                        <div class="col-4 d-none admin-only" id="actionAdmin">
                            <a href="admin.html" class="btn btn-danger btn-block btn-lg">
                                <i class="fas fa-cogs"></i>
                                <br>
                                Administración
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="stat-card bounce-in">
                    <div class="stat-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="stat-number" id="totalSolicitudes">0</div>
                    <div class="stat-label">Total Solicitudes</div>
                </div>
                <div class="stat-card bounce-in">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-number" id="solicitudesAprobadas">0</div>
                    <div class="stat-label">Aprobadas</div>
                </div>
                <div class="stat-card bounce-in">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-number" id="solicitudesPendientes">0</div>
                    <div class="stat-label">Pendientes</div>
                </div>
                <div class="stat-card bounce-in">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-number" id="montoTotal">S/ 0</div>
                    <div class="stat-label">Monto Aprobado</div>
                </div>
            </div>

            <div class="card client-only">
                <div class="card-header">
                    <h3><i class="fas fa-chart-line"></i> Mi Score Crediticio</h3>
                </div>
                <div class="card-body text-center">
                    <div class="score-circle">
                        <div class="score-text" id="scoreValue">N/A</div>
                    </div>
                    <h4>Score: <span id="scoreText">No disponible</span></h4>
                    <p>Tu score crediticio te permite acceder a créditos con tasas preferenciales.</p>
                    <div class="progress">
                        <div class="progress-bar" id="scoreProgressBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-clock"></i> Solicitudes Recientes</h3>
                    <a href="solicitudes.html" class="btn btn-primary btn-sm client-only">
                        <i class="fas fa-eye"></i> Ver Todas
                    </a>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Monto</th>
                                    <th>Plazo</th>
                                    <th>Estado</th>
                                    <th>Fecha de Solicitud</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="solicitudesTableBody">
                                <tr><td colspan="6" class="text-center">Cargando solicitudes...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-bell"></i> Notificaciones Recientes</h3>
                </div>
                <div class="card-body">
                    <div id="notificaciones">
                         <div style="padding: 15px; border-left: 4px solid var(--primary-color); margin-bottom: 15px; background: rgba(102, 126, 234, 0.05);">
                            <strong>Notificaciones en desarrollo</strong><br>
                            <small>Este panel mostrará tus notificaciones importantes del sistema.</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="documentos" class="content-section">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-folder-open"></i> Gestión de Documentos</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label class="form-label">Solicitud</label>
                        <select class="form-select" id="solicitudDocumentos">
                            <option value="">Selecciona una solicitud...</option>
                        </select>
                    </div>

                    <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h4>Subir Documentos</h4>
                        <p>Haz clic aquí o arrastra los archivos</p>
                        <small>Formatos permitidos: PDF, JPG, PNG (Máx. 50MB)</small>
                        <input type="file" id="fileInput" multiple accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                    </div>

                    <div class="table-container mt-3">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Tipo de Documento</th>
                                    <th>Estado</th>
                                    <th>Fecha Subida</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="documentosTableBody">
                                <tr><td colspan="4" class="text-center">Selecciona una solicitud para ver sus documentos.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="evaluacion" class="content-section d-none evaluator-admin-only">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-search"></i> Evaluación de Solicitudes</h3>
                </div>
                <div class="card-body">
                    <p>Panel de evaluación para revisar y aprobar solicitudes de crédito.</p>
                    <div class="text-center mt-3">
                        <a href="solicitudes.html" class="btn btn-primary btn-lg">
                            <i class="fas fa-external-link-alt"></i> Ir al Panel Completo de Evaluación
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="reportes" class="content-section d-none evaluator-admin-only">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-chart-bar"></i> Reportes y Analytics</h3>
                </div>
                <div class="card-body">
                    <p>Generación de reportes y análisis del sistema de créditos.</p>
                    <div class="row mt-3">
                        <div class="col">
                            <button class="btn btn-primary btn-block">
                                <i class="fas fa-file-pdf"></i> Reporte Mensual
                            </button>
                        </div>
                        <div class="col">
                            <button class="btn btn-success btn-block">
                                <i class="fas fa-chart-line"></i> Analytics
                            </button>
                        </div>
                        <div class="col">
                            <a href="admin.html" class="btn btn-danger btn-block admin-only">
                                <i class="fas fa-cogs"></i> Panel Admin
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="admin" class="content-section d-none admin-only">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-cogs"></i> Panel de Administración</h3>
                </div>
                <div class="card-body">
                    <p>Accede a la gestión de usuarios y configuraciones del sistema.</p>
                    <div class="text-center mt-3">
                        <a href="admin.html" class="btn btn-danger btn-lg">
                            <i class="fas fa-external-link-alt"></i> Ir al Panel de Administración
                        </a>
                    </div>
                </div>
            </div>
        </section>
        

    </div>



    <script src="script.js"></script>
</body>
</html>